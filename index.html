<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Mini Minecraft 2D Infinite</title>
<style>
  body { margin:0; background:#87ceeb; }
  canvas { display:block; }
</style>
</head>
<body>

<canvas id="game"></canvas>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
canvas.width=800; canvas.height=400;

const TILE=40;

// Ressourcen: 0=Luft, 1=Erde, 2=Stein, 3=Holz, 4=Werkbank, 5=Eisen, 6=Gold, 7=Diamant, 8=Wasser
let world=[];
const ROWS=10;
const COLS=100; // Start mit 100 Bl√∂cken Breite
for(let y=0;y<ROWS;y++){
  world[y]=[];
  for(let x=0;x<COLS;x++){
    if(y>=5){
      let r=Math.random();
      if(r<0.05) world[y][x]=7; // Diamant
      else if(r<0.10) world[y][x]=6; // Gold
      else if(r<0.25) world[y][x]=5; // Eisen
      else world[y][x]=2; // Stein garantiert
    } else world[y][x]=0; // Luft oben
  }
}

// Spieler
const player={x:100,y:100,w:30,h:30,hp:5,tool:null};

// Monster
let monsters=[];

// Inventar
let inventory={dirt:0,stone:0,wood:0,table:0,sword:0,pickaxe:0,iron:0,gold:0,diamond:0,water:0};

// Tasten
const keys={};
document.addEventListener("keydown", e=>keys[e.key]=true);
document.addEventListener("keyup", e=>keys[e.key]=false);

// Abbauen / Platzieren
canvas.addEventListener("click", e=>{
  const x=Math.floor((e.offsetX+cameraX)/TILE);
  const y=Math.floor(e.offsetY/TILE);
  const block=world[y][x];
  if(block>0){
    if(block===1) inventory.dirt++;
    if(block===2) inventory.stone++;
    if(block===3) inventory.wood++;
    if(block===5) inventory.iron++;
    if(block===6) inventory.gold++;
    if(block===7) inventory.diamond++;
    if(block===8) inventory.water++;
    world[y][x]=0;
  } else {
    // Platzieren aus Inventar
    if(inventory.dirt>0){ world[y][x]=1; inventory.dirt--; }
    else if(inventory.stone>0){ world[y][x]=2; inventory.stone--; }
    else if(inventory.wood>0){ world[y][x]=3; inventory.wood--; }
  }
});

// Crafting Rezepte
document.addEventListener("keydown", e=>{
  if(e.key==="c"){
    if(inventory.wood>=4){ inventory.wood-=4; inventory.table++; }
    if(inventory.wood>=2 && inventory.stone>=1 && inventory.table>=1){ inventory.wood-=2; inventory.stone-=1; inventory.sword++; player.tool="sword"; }
    if(inventory.wood>=2 && inventory.stone>=2 && inventory.table>=1){ inventory.wood-=2; inventory.stone-=2; inventory.pickaxe++; player.tool="pickaxe"; }
  }
});

// Werkbank setzen
document.addEventListener("keydown", e=>{
  if(e.key==="t" && inventory.table>0){
    const x=Math.floor(player.x/TILE);
    const y=Math.floor(player.y/TILE);
    world[y][x]=4; inventory.table--;
  }
});

// Tag/Nacht
let time=0; //0=Tag, 0.5=Mitternacht
function updateTime(){ time
